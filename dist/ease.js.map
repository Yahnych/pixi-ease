{"version":3,"file":"ease.js","sources":["../node_modules/penner/penner.js","../node_modules/eventemitter3/index.js","../src/easeDisplayObject.js","../src/ease.js"],"sourcesContent":["\n/*\n\tCopyright Â© 2001 Robert Penner\n\tAll rights reserved.\n\n\tRedistribution and use in source and binary forms, with or without modification, \n\tare permitted provided that the following conditions are met:\n\n\tRedistributions of source code must retain the above copyright notice, this list of \n\tconditions and the following disclaimer.\n\tRedistributions in binary form must reproduce the above copyright notice, this list \n\tof conditions and the following disclaimer in the documentation and/or other materials \n\tprovided with the distribution.\n\n\tNeither the name of the author nor the names of contributors may be used to endorse \n\tor promote products derived from this software without specific prior written permission.\n\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n\tEXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n\tMERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n\tCOPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\tEXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n\tGOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n\tAND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n\tNEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n\tOF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n(function() {\n  var penner, umd;\n\n  umd = function(factory) {\n    if (typeof exports === 'object') {\n      return module.exports = factory;\n    } else if (typeof define === 'function' && define.amd) {\n      return define([], factory);\n    } else {\n      return this.penner = factory;\n    }\n  };\n\n  penner = {\n    linear: function(t, b, c, d) {\n      return c * t / d + b;\n    },\n    easeInQuad: function(t, b, c, d) {\n      return c * (t /= d) * t + b;\n    },\n    easeOutQuad: function(t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    },\n    easeInOutQuad: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t + b;\n      } else {\n        return -c / 2 * ((--t) * (t - 2) - 1) + b;\n      }\n    },\n    easeInCubic: function(t, b, c, d) {\n      return c * (t /= d) * t * t + b;\n    },\n    easeOutCubic: function(t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t + 1) + b;\n    },\n    easeInOutCubic: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * t + 2) + b;\n      }\n    },\n    easeInQuart: function(t, b, c, d) {\n      return c * (t /= d) * t * t * t + b;\n    },\n    easeOutQuart: function(t, b, c, d) {\n      return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n    },\n    easeInOutQuart: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t * t + b;\n      } else {\n        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n      }\n    },\n    easeInQuint: function(t, b, c, d) {\n      return c * (t /= d) * t * t * t * t + b;\n    },\n    easeOutQuint: function(t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    easeInOutQuint: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t * t * t + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n      }\n    },\n    easeInSine: function(t, b, c, d) {\n      return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n    },\n    easeOutSine: function(t, b, c, d) {\n      return c * Math.sin(t / d * (Math.PI / 2)) + b;\n    },\n    easeInOutSine: function(t, b, c, d) {\n      return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n    },\n    easeInExpo: function(t, b, c, d) {\n      if (t === 0) {\n        return b;\n      } else {\n        return c * Math.pow(2, 10 * (t / d - 1)) + b;\n      }\n    },\n    easeOutExpo: function(t, b, c, d) {\n      if (t === d) {\n        return b + c;\n      } else {\n        return c * (-Math.pow(2, -10 * t / d) + 1) + b;\n      }\n    },\n    easeInOutExpo: function(t, b, c, d) {\n      if (t === 0) {\n        b;\n      }\n      if (t === d) {\n        b + c;\n      }\n      if ((t /= d / 2) < 1) {\n        return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n      } else {\n        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n      }\n    },\n    easeInCirc: function(t, b, c, d) {\n      return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n    },\n    easeOutCirc: function(t, b, c, d) {\n      return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n    },\n    easeInOutCirc: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n      } else {\n        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n      }\n    },\n    easeInElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) {\n        b;\n      } else if ((t /= d) === 1) {\n        b + c;\n      }\n      if (!p) {\n        p = d * .3;\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    },\n    easeOutElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) {\n        b;\n      } else if ((t /= d) === 1) {\n        b + c;\n      }\n      if (!p) {\n        p = d * .3;\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n    },\n    easeInOutElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) {\n        b;\n      } else if ((t /= d / 2) === 2) {\n        b + c;\n      }\n      if (!p) {\n        p = d * (.3 * 1.5);\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      if (t < 1) {\n        return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n      } else {\n        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;\n      }\n    },\n    easeInBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    easeOutBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    easeInOutBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      if ((t /= d / 2) < 1) {\n        return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n      }\n    },\n    easeInBounce: function(t, b, c, d) {\n      var v;\n      v = penner.easeOutBounce(d - t, 0, c, d);\n      return c - v + b;\n    },\n    easeOutBounce: function(t, b, c, d) {\n      if ((t /= d) < 1 / 2.75) {\n        return c * (7.5625 * t * t) + b;\n      } else if (t < 2 / 2.75) {\n        return c * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + b;\n      } else if (t < 2.5 / 2.75) {\n        return c * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + b;\n      } else {\n        return c * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + b;\n      }\n    },\n    easeInOutBounce: function(t, b, c, d) {\n      var v;\n      if (t < d / 2) {\n        v = penner.easeInBounce(t * 2, 0, c, d);\n        return v * .5 + b;\n      } else {\n        v = penner.easeOutBounce(t * 2 - d, 0, c, d);\n        return v * .5 + c * .5 + b;\n      }\n    }\n  };\n\n  umd(penner);\n\n}).call(this);\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import Events from 'eventemitter3'\r\n\r\nexport class EaseDisplayObject extends Events\r\n{\r\n    /**\r\n     * each DisplayObject has its own EaseElement object returned by add() or accessed through DisplayObject.__ease_{$id}\r\n     * @extends EventEmitter\r\n     * @fires EaseElement#complete\r\n     * @fires EaseElement#each-*\r\n     * @fires EaseElement#complete-*\r\n     * @fires EaseElement#loop-*\r\n     * @fires EaseElement#wait-*\r\n     * @fires EaseElement#wait-end-*\r\n     */\r\n    constructor(element, ease)\r\n    {\r\n        super()\r\n\r\n        /**\r\n         * element being animated\r\n         * @member {PIXI.DisplayObject}\r\n         */\r\n        this.element = element\r\n        this.ease = ease\r\n        this.eases = []\r\n        this.connected = true\r\n    }\r\n\r\n    addParam(entry, param, options)\r\n    {\r\n        let start, to, delta, update, name\r\n        switch (entry)\r\n        {\r\n            case 'scaleX':\r\n            case 'skewX':\r\n                name = entry.substr(0, entry.length - 1)\r\n                start = this.element[name].x\r\n                to = param\r\n                delta = param - start\r\n                update = (ease) => this.updateCoord(ease, entry, name, 'x')\r\n                break\r\n\r\n            case 'scaleY':\r\n            case 'skewY':\r\n                name = entry.substr(0, entry.length - 1)\r\n                start = this.element[name].y\r\n                to = param\r\n                delta = param - start\r\n                update = (ease) => this.updateCoord(ease, entry, name, 'y')\r\n                break\r\n\r\n            case 'tint':\r\n            case 'tintBlend':\r\n                start = 0\r\n                to = 1\r\n                delta = 1\r\n                const colors = !Array.isArray(param) ? [param] : param\r\n                const tint = this.element.tint\r\n                colors.unshift(tint ? tint : 0xffffff)\r\n                const interval = 1 / colors.length\r\n                update = (entry === 'tint') ? (ease) => this.updateTint(ease, entry, colors, interval) : (ease) => this.updateBlend(ease, entry, colors, interval)\r\n                break\r\n\r\n            case 'shake':\r\n                start = { x: this.element.x, y: this.element.y }\r\n                to = param\r\n                update = (ease) => this.updateShake(ease)\r\n                break\r\n\r\n            default:\r\n                start = this.element[entry]\r\n                to = param\r\n                delta = param - start\r\n                update = (ease) => this.updateOne(ease, entry)\r\n        }\r\n\r\n        const eases = this.eases\r\n        let i\r\n        for (i = 0; i < eases.length; i++)\r\n        {\r\n            if (eases[i].entry === entry)\r\n            {\r\n                break\r\n            }\r\n        }\r\n        const add = { entry, options, update, start, to, delta, time: 0, wait: options.wait || 0 }\r\n        if (i !== eases.length)\r\n        {\r\n            this.eases[i] = add\r\n        }\r\n        this.eases.push(add)\r\n    }\r\n\r\n    add(params, options)\r\n    {\r\n        for (let entry in params)\r\n        {\r\n            const opts = { ease: options.ease, duration: options.duration, repeat: options.repeat, reverse: options.reverse }\r\n            const param = params[entry]\r\n            if (entry === 'scale')\r\n            {\r\n                this.addParam('scaleX', param, opts)\r\n                this.addParam('scaleY', param, opts)\r\n            }\r\n            else if (entry === 'skew')\r\n            {\r\n                this.addParam('skewX', param, opts)\r\n                this.addParam('skewY', param, opts)\r\n            }\r\n            else if (entry === 'target')\r\n            {\r\n                this.addParam('x', param.x, opts)\r\n                this.addParam('y', param.y, opts)\r\n            }\r\n            else\r\n            {\r\n                this.addParam(entry, param, opts)\r\n            }\r\n        }\r\n    }\r\n\r\n    updateOne(ease, entry)\r\n    {\r\n        this.element[entry] = ease.options.ease(ease.time, ease.start, ease.delta, ease.options.duration)\r\n    }\r\n\r\n    updateCoord(ease, entry, name, coord)\r\n    {\r\n        this.element[name][coord] = ease.options.ease(ease.time, ease.start, ease.delta, ease.options.duration)\r\n    }\r\n\r\n    updateTint(ease, entry, colors, interval)\r\n    {\r\n        const percent = ease.options.ease(ease.time, ease.start, ease.delta, ease.options.duration)\r\n        const index = Math.floor(percent / interval)\r\n        this.element.tint = colors[index]\r\n    }\r\n\r\n    updateBlend(ease, entry, colors, interval)\r\n    {\r\n        const percent = ease.options.ease(ease.time, ease.start, ease.delta, ease.options.duration)\r\n        let index = Math.floor(percent / interval)\r\n        index = index === colors.length ? index - 1 : index\r\n        let next = index + 1\r\n        if (next === colors.length)\r\n        {\r\n            next = ease.options.reverse ? index - 1 : 0\r\n        }\r\n        const percentBlend = (percent % interval) / interval\r\n        const color1 = colors[index]\r\n        const color2 = colors[next]\r\n        if (percentBlend === 0)\r\n        {\r\n            return color1\r\n        }\r\n        if (percentBlend === 1)\r\n        {\r\n            return color2\r\n        }\r\n        var r1 = color1 >> 16\r\n        var g1 = color1 >> 8 & 0x0000ff\r\n        var b1 = color1 & 0x0000ff\r\n        var r2 = color2 >> 16\r\n        var g2 = color2 >> 8 & 0x0000ff\r\n        var b2 = color2 & 0x0000ff\r\n        var percent1 = 1 - percentBlend\r\n        var r = percent1 * r1 + percent * r2\r\n        var g = percent1 * g1 + percent * g2\r\n        var b = percent1 * b1 + percent * b2\r\n        this.element.tint = r << 16 | g << 8 | b\r\n    }\r\n\r\n    updateShake(ease)\r\n    {\r\n        function random(n)\r\n        {\r\n            return Math.floor(Math.random() * n) - Math.floor(n / 2)\r\n        }\r\n        this.element.x = ease.start.x + random(ease.to)\r\n        this.element.y = ease.start.y + random(ease.to)\r\n    }\r\n\r\n    reverse(ease)\r\n    {\r\n        const swap = ease.to\r\n        ease.to = ease.start\r\n        ease.start = swap\r\n        ease.delta = -ease.delta\r\n    }\r\n\r\n    update(elapsed)\r\n    {\r\n        if (this.element._destroyed)\r\n        {\r\n            delete this.element[this.key]\r\n            return true\r\n        }\r\n        const eases = this.eases\r\n        for (let i = 0, _i = eases.length; i < _i; i++)\r\n        {\r\n            const ease = eases[i]\r\n            if (ease.wait !== 0)\r\n            {\r\n                ease.wait -= elapsed\r\n                if (ease.wait <= 0)\r\n                {\r\n                    ease.wait = 0\r\n                    this.emit('wait-end-' + ease.name, ease.element)\r\n                }\r\n                else\r\n                {\r\n                    this.emit('wait-' + ease.entry, { element: this.element, wait: ease.wait })\r\n                    continue\r\n                }\r\n            }\r\n            const duration = ease.options.duration\r\n            let leftover = 0\r\n            if (ease.time + elapsed > duration)\r\n            {\r\n                leftover = ease.time + elapsed - duration\r\n                ease.time = duration\r\n            }\r\n            else\r\n            {\r\n                ease.time += elapsed\r\n            }\r\n            ease.update(ease)\r\n            if (ease.time >= ease.options.duration)\r\n            {\r\n                const options = ease.options\r\n                if (options.reverse)\r\n                {\r\n                    this.emit('loop-' + ease.name, ease.element)\r\n                    this.reverse(ease)\r\n                    ease.time = leftover\r\n                    if (!options.repeat)\r\n                    {\r\n                        options.reverse = false\r\n                    }\r\n                    else if (options.repeat !== true)\r\n                    {\r\n                        options.repeat--\r\n                    }\r\n                }\r\n                else if (options.repeat)\r\n                {\r\n                    ease.time = leftover\r\n                    if (options.repeat !== true)\r\n                    {\r\n                        options.repeat--\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    this.emit('complete-' + ease.entry, this.element)\r\n                    eases.splice(i, 1)\r\n                    i--\r\n                    _i--\r\n                }\r\n            }\r\n            this.emit('each-' + ease.entry, this.element)\r\n        }\r\n        this.emit('each', this)\r\n        if (Object.keys(eases).length === 0)\r\n        {\r\n            this.emit('complete', this)\r\n            this.connected = false\r\n            return true\r\n        }\r\n    }\r\n\r\n    /**\r\n     * number of parameters being eased\r\n     * @returns {number}\r\n     */\r\n    get count()\r\n    {\r\n        return Object.keys(this.eases)\r\n    }\r\n}\r\n\r\n/**\r\n * fires when there are no more animations for this DisplayObject\r\n * @event EaseElement#complete\r\n * @type {EaseElement}\r\n */\r\n\r\n/**\r\n * fires when the parameter completes the ease\r\n * where name is the name of the parameter being eased (e.g., complete-x)\r\n * @event EaseElement#complete-*\r\n * @type {EaseElement}\r\n */\r\n\r\n/**\r\n * fires on each loop where there are animations\r\n * where * is the name of the parameter being eased (e.g., each-rotation)\r\n * @event EaseElement#each-*\r\n * @type {EaseElement}\r\n */\r\n\r\n/**\r\n * fires when an animation repeats or reverses\r\n * where * is the name of the parameter being eased (e.g., complete-skewX)\r\n * @event EaseElement#loop-*\r\n * @type {EaseElement}\r\n */\r\n\r\n/**\r\n * fires on each loop while a wait is counting down\r\n * where * is the name fo the parameter being eased (e.g., wait-end-y)\r\n * @event EaseElement#wait-*\r\n * @type {object}\r\n * @property {EaseElement} element\r\n * @property {number} wait\r\n */\r\n\r\n/**\r\n * fires after a wait expires for a parameter\r\n * where * is the name fo the parameter being eased (e.g., wait-end-y)\r\n * @event EaseElement#wait-end-*\r\n * @type { EaseElement }\r\n */","import * as PIXI from 'pixi.js'\r\nimport Penner from 'penner'\r\nimport Events from 'eventemitter3'\r\n\r\nimport { EaseDisplayObject } from './easeDisplayObject'\r\n\r\nconst easeOptions = {\r\n    duration: 1000,\r\n    ease: Penner.easeInOutSine,\r\n    useTicker: true\r\n}\r\n\r\n/**\r\n * Manages a group of eases\r\n * @extends EventEmitter\r\n * @example\r\n * import * as PIXI from 'pixi.js'\r\n * import { Ease, ease } from 'pixi-ease'\r\n *\r\n * const app = new PIXI.Application()\r\n * const test = app.stage.addChild(new PIXI.Sprite(PIXI.Texture.WHITE))\r\n *\r\n * const move = ease.add(test, { x: 20, y: 15, alpha: 0.25 }, { reverse: true })\r\n * move.once('complete', () => console.log('move ease complete.'))\r\n *\r\n * test.generic = 25\r\n * const generic = ease.add(test, { generic: 0 }, { duration: 1500, ease: 'easeOutQuad' })\r\n * generic.on('each', () => console.log(test.generic))\r\n *\r\n * const secondEase = new Ease({ duration: 3000, ease: 'easeInBack' })\r\n * const test2 = app.stage.addChild(new PIXI.Sprite(PIXI.Texture.WHITE))\r\n * test2.tint = 0x0000ff\r\n * secondEase.add(test2, { tintBlend: [0xff0000, 0x00ff00], scale: 2 })\r\n */\r\nexport class Ease extends Events\r\n{\r\n    /**\r\n     * @param {object} [options]\r\n     * @param {number} [options.duration=1000] default duration if not set\r\n     * @param {(string|function)} [options.ease=Penner.easeInOutSine] default ease function if not set (see {@link https://www.npmjs.com/package/penner} for names of easing functions)\r\n     * @param {boolean} [options.useTicker=true] attach updates to a PIXI.Ticker\r\n     * @param {PIXI.Ticker} [options.ticker=PIXI.ticker.shared || PIXI.Ticker.shared] which PIXI.Ticker to use\r\n     * @fires Ease#complete\r\n     * @fires Ease#each\r\n     */\r\n    constructor(options)\r\n    {\r\n        super()\r\n        this.options = Object.assign({}, easeOptions, options)\r\n        this.list = []\r\n        this.empty = true\r\n        if (this.options.useTicker === true)\r\n        {\r\n            // weird code to ensure pixi.js v4 support (which changed from PIXI.ticker.shared to PIXI.Ticker.shared)\r\n            if (this.options.ticker)\r\n            {\r\n                this.ticker = this.options.ticker\r\n            }\r\n            else\r\n            {\r\n                // to avoid Rollup transforming our import, save pixi namespace in a variable\r\n                // from here: https://github.com/pixijs/pixi.js/issues/5757\r\n                const pixiNS = PIXI\r\n                if (parseInt(/^(\\d+)\\./.exec(PIXI.VERSION)[1]) < 5)\r\n                {\r\n                    this.ticker = pixiNS.ticker.shared;\r\n                }\r\n                else\r\n                {\r\n                    this.ticker = pixiNS.Ticker.shared;\r\n                }\r\n            }\r\n            this.ticker.add(this.update, this)\r\n        }\r\n        this.key = `__ease_${Ease.id++}`\r\n    }\r\n\r\n    /**\r\n     * removes all eases and tickers\r\n     */\r\n    destroy()\r\n    {\r\n        this.removeAll()\r\n        if (this.options.useTicker === true)\r\n        {\r\n            this.ticker.remove(this.update, this)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add animation(s) to a PIXI.DisplayObject element\r\n     * @param {(PIXI.DisplayObject|PIXI.DisplayObject[])} element\r\n     * @param {object} params\r\n     * @param {number} [params.x]\r\n     * @param {number} [params.y]\r\n     * @param {(PIXI.DisplayObject|PIXI.Point)} [params.target] changes both x and y\r\n     * @param {number} [params.width]\r\n     * @param {number} [params.height]\r\n     * @param {number} [params.scale] changes both scale.x and scale.y\r\n     * @param {number} [params.scaleX]\r\n     * @param {number} [params.scaleY]\r\n     * @param {number} [params.alpha]\r\n     * @param {number} [params.rotation]\r\n     * @param {number} [params.rotationFace] rotate to face a DisplayObject using the closest angle\r\n     * @param {number} [params.skew] changes both skew.x and skew.y\r\n     * @param {number} [params.skewX]\r\n     * @param {number} [params.skewY]\r\n     * @param {(number|number[])} [params.tint] this includes the current tint (or 0xffffff) as the first color\r\n     * @param {(number|number[])} [params.tintBlend] tint by blending between colors\r\n     * @param {number} [params.shake] moves\r\n     * @param {number} [params.*] generic number parameter\r\n     * @param {object} [options]\r\n     * @param {number} [options.duration]\r\n     * @param {(string|function)} [options.ease]\r\n     * @param {(boolean|number)} [options.repeat]\r\n     * @param {boolean} [options.reverse]\r\n     * @param {number} [options.wait] wait this number of milliseconds before ease starts\r\n     * @returns {EaseDisplayObject}\r\n     */\r\n    add(element, params, options)\r\n    {\r\n        if (Array.isArray(element))\r\n        {\r\n            for (let i = 0; i < element.length; i++)\r\n            {\r\n                if (i === element.length - 1)\r\n                {\r\n                    return this.add(element[i], params, options)\r\n                }\r\n                else\r\n                {\r\n                    this.add(element[i], params, options)\r\n                }\r\n            }\r\n        }\r\n\r\n        options = options || {}\r\n        options.duration = typeof options.duration !== 'undefined' ? options.duration : this.options.duration\r\n        options.ease = options.ease || this.options.ease\r\n\r\n        if (typeof options.ease === 'string')\r\n        {\r\n            options.ease = Penner[options.ease]\r\n        }\r\n        let ease = element[this.key]\r\n        if (ease)\r\n        {\r\n            if (!ease.connected)\r\n            {\r\n                this.list.push(element)\r\n            }\r\n        }\r\n        else\r\n        {\r\n            ease = element[this.key] = new EaseDisplayObject(element)\r\n            this.list.push(ease)\r\n        }\r\n        ease.add(params, options)\r\n        this.empty = false\r\n        return ease\r\n    }\r\n\r\n    /**\r\n     * remove all eases from a DisplayObject\r\n     * @param {PIXI.DisplayObject} object\r\n     */\r\n    removeAllEases(object)\r\n    {\r\n        if (object[this.key])\r\n        {\r\n            const index = this.list.indexOf(object[this.key])\r\n            if (index !== -1)\r\n            {\r\n                this.list.splice(index, 1)\r\n            }\r\n            delete object[this.key]\r\n        }\r\n    }\r\n\r\n    /**\r\n     * removes one or more eases from a DisplayObject\r\n     * @param {PIXI.DisplayObject} object\r\n     * @param {(string|string[])} param\r\n     */\r\n    removeEase(object, param)\r\n    {\r\n        const ease = object[this.key]\r\n        if (ease)\r\n        {\r\n            if (Array.isArray(param))\r\n            {\r\n                param.forEach((entry) => ease.remove(entry))\r\n            }\r\n            else\r\n            {\r\n                ease.remove(param)\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * remove all animations for all DisplayObjects\r\n     */\r\n    removeAll()\r\n    {\r\n        while (this.list.length)\r\n        {\r\n            const easeDisplayObject = this.list.pop()\r\n            if (easeDisplayObject.element[this.key])\r\n            {\r\n                delete easeDisplayObject.element[this.key]\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * update frame; this is called automatically if options.useTicker !== false\r\n     * @param {number} elapsed time in ms\r\n     */\r\n    update()\r\n    {\r\n        if (!this.empty)\r\n        {\r\n            const elapsed = Math.max(this.ticker.elapsedMS, 1000 / 60)\r\n            for (let i = 0, _i = this.list.length; i < _i; i++)\r\n            {\r\n                if (this.list[i].update(elapsed))\r\n                {\r\n                    this.list.splice(i, 1)\r\n                    i--\r\n                    _i--\r\n                }\r\n            }\r\n            this.emit('each', this)\r\n            if (this.list.length === 0)\r\n            {\r\n                this.empty = true\r\n                this.emit('complete', this)\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * number of elements being eased\r\n     * @returns {number}\r\n     */\r\n    countElements()\r\n    {\r\n        return this.list.length\r\n    }\r\n\r\n    /**\r\n     * number of active animations across all elements\r\n     * @returns {number}\r\n     */\r\n    countRunning()\r\n    {\r\n        let count = 0\r\n        for (let entry of this.list)\r\n        {\r\n            count += entry.count\r\n        }\r\n        return count\r\n    }\r\n\r\n    /**\r\n     * default duration for eases.add() (only applies to newly added eases)\r\n     * @type {number}\r\n     */\r\n    set duration(duration)\r\n    {\r\n        this.options.duration = duration\r\n    }\r\n    get duration()\r\n    {\r\n        return this.options.duration\r\n    }\r\n\r\n    /**\r\n     * default ease for eases.add() (only applies to newly added eases)\r\n     * @type {(string|Function)}\r\n     */\r\n    set ease(ease)\r\n    {\r\n        this.options.ease = ease\r\n    }\r\n    get ease()\r\n    {\r\n        return this.options.ease\r\n    }\r\n}\r\n\r\n// manages the ids used to define the DisplayObject ease variable (enabled multiple eases attached to the same object)\r\nEase.id = 0\r\n\r\n/**\r\n * default instantiated Ease class\r\n * @type {Ease}\r\n */\r\nexport let ease = new Ease()\r\n\r\nEase.ease = ease\r\n\r\nexport class List\r\n{\r\n    constructor()\r\n    {\r\n        console.warn('Ease.List was deprecated. Use new Ease() instead.')\r\n    }\r\n}\r\n\r\n/**\r\n * fires when there are no more eases\r\n * @event Ease#complete\r\n * @type {Ease}\r\n */\r\n\r\n /**\r\n * fires on each loop when there are eases running\r\n * @event Ease#each\r\n * @type {Ease}\r\n */\r\n"],"names":["penner","factory","module","umd","linear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","Math","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInElastic","a","p","s","abs","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","call","this","has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","slice","getOwnPropertySymbols","concat","listeners","handlers","i","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","EaseDisplayObject","[object Object]","element","ease","super","eases","connected","entry","param","options","start","to","delta","update","substr","x","updateCoord","y","colors","isArray","tint","unshift","interval","updateTint","updateBlend","updateShake","updateOne","add","time","wait","params","opts","duration","repeat","reverse","addParam","coord","percent","index","floor","next","percentBlend","color1","color2","percent1","r","g","random","n","swap","elapsed","_destroyed","key","_i","leftover","splice","keys","count","easeOptions","Penner","useTicker","Ease","assign","list","empty","ticker","pixiNS","PIXI","parseInt","exec","PIXI.VERSION","shared","Ticker","id","removeAll","remove","object","indexOf","forEach","easeDisplayObject","pop","max","elapsedMS","console","warn"],"mappings":"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"}